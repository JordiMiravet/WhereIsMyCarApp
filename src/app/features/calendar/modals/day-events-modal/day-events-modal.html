<div 
  class="modal-overlay" 
  (click)="handleClose()"
  role="dialog"
  aria-modal="true"
  aria-labelledby="dayEventsTitle"
>
    <section class="day-events" (click)="$event.stopPropagation()">

        <header class="day-events__header">
            <h2 id="dayEventsTitle" class="day-events__title" [attr.aria-label]="'Events of the Day' + date()">
                <i class="pi pi-calendar" aria-hidden="true"></i>
                Events of the Day: <span>{{ date() }}</span>
            </h2>
            <app-create-button 
                (click)="onCreate()"
                [createText]="'Event'"
                [attr.aria-label]="'Create a new event for' + date()"
            />
        </header>

        @if( events().length > 0) {
            <ul class="day-events__list">
                @for (event of events(); track $index) {
                    <li>
                        <details class="day-events__details" [attr.id]="'eventDetails' + $index">
                            <summary
                                class="day-events__summary"
                                (click)="openDetails($index)"
                                [attr.aria-controls]="'eventDetails' + $index"
                            >
                                <span class="day-events__event-title">{{ event.title }}</span>

                                <div class="day-events__time">
                                    <span class="day-events__time-value">
                                        {{ event.hourStart || '-- : --' }} - {{ event.hourEnd || '-- : --' }}
                                    </span>
                                    <span class="day-events__time-label">
                                        <i class="pi pi-clock" aria-hidden="true"></i>
                                    </span>
                                </div>
                            </summary>

                            @if(event.comment?.length){
                                <p class="day-events__comment">{{ event.comment }}</p>
                            }

                            <div class="day-events__actions">
                                <app-edit-button 
                                    (edit)="onEdit(event._id)"
                                    [attr.aria-label]="'Edit ' + event.title"
                                ></app-edit-button>
                                <app-delete-button 
                                    (delete)="onDelete(event._id)"
                                    [attr.aria-label]="'Delete ' + event.title"
                                ></app-delete-button>
                            </div>
                        </details>
                    </li>
                }   
            </ul>
        } @else {
            <button 
                class="day-events__empty" 
                (click)="onCreate()"
                [attr.aria-label]="'Create a new event for ' + date()"
            >
                There are no events for the selected day
            </button>
        }

    </section>
</div>
